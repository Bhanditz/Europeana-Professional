{#
	sort list view by url param 'url' or default contenttype sort setting 
	-> works only for records with the same contenttype
#}

{# get current sort option by url param 'order' #}
{% set currentsortoption = app.request.get('order') %}

{# otherwise get default sort option of the contenttype #}
{% if currentsortoption is empty %}
	{% set currentsortoption = records|first.contenttype.sort %}
{% endif %}

{# get sort options from the config file by contenttypeslug #}
{% set sortoptions = app.config.get('general/sort_options_'~records|first.contenttype.slug ) %}

<div class="sortby">
	<form method="get">
	    <label for="list_sortby">Sort by:</label>
	    <select id="list_sortby" name="order" javascript: onchange="this.form.submit()">
	    	{% for key, value in sortoptions %}
	    		{% if key == currentsortoption %}
	    			<option value="{{ key }}" selected>{{ value }}</option>
	    		{% else %}
	    			<option value="{{ key}}">{{ value }}</option>
	    		{% endif %}
	    	{% endfor %}
	    </select>
    </form>
</div>


	
