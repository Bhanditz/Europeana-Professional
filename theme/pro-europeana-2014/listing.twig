{% include '_header.twig' %}


{# set records by structureset #}
{% if structureset %}
	{% set records = structureset %}
{# set records by tags #}
{% elseif ('/tags/' in app.request.pathInfo) %}
	{# % set sortoption = app.request.get('order') % #}
	{% setcontent records = '(blogposts, events, publications, pages)' where { tags: slug } limit app.config.get('general/listing_records') allowpaging %}
{# set records by contenttype #}
{% else %}
	{# get records for contenttype. limit must be definied to enable pagination #}
	{% setcontent records = records|first.contenttype.slug limit app.config.get('general/listing_records') allowpaging %}
	{% set showsortby = true %}
{% endif %}



<!-- Start content -->
<main role="main" class="l-page">
<div class="lc">
	<!-- Start grid -->
	<div class="grid-main">

		<div class="l-content">

			<div class="l-breadcrumbs">
				{% include 'items/_item-breadcrumb.twig' %}
				
				{# hide sortby template for tag- and structure listing #}
				{% if showsortby %}
					{% include 'items/_item-sortby.twig' %}
				{% endif %}
			</div>

		<div class="maincontent">

			<div class="results">

				<ul class="results-list">
					{% for listItem in records %}
						{% include 'items/_item-list.twig' with { record: listItem } %}
					{% endfor %}
				</ul>
				
				{{ pager() }}

			</div>
			
			

		</div>
		</div><!--

	 --><div class="l-sidebar">
	 		<div class="inner">
	 			{# contact person has to be defined, this is only for testing #}
				{% include 'items/_item-help.twig' with { record: listItems|first.related('persons')|first } %}
			</div>

		</div>
	</div>
	<!-- End grid -->
</div>
</main>
<!-- End Content -->

{% include '_footer.twig' %}

